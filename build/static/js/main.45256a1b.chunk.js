(this["webpackJsonpreact-tetris"]=this["webpackJsonpreact-tetris"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(7),o=n.n(i),l=(n(13),n(1)),s=n(2),u=n(4),d=n(3),f=n(5),c=[[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,0,0,0,0,0,0,0,0,0,0,-8],[-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8]],v={I:{id:1,shape:[[[-1,-1],[0,-1],[1,-1],[2,-1]],[[0,-1],[0,0],[0,1],[0,2]],[[-1,-1],[0,-1],[1,-1],[2,-1]],[[0,-1],[0,0],[0,1],[0,2]]]},O:{id:2,shape:[[[0,0],[0,-1],[1,0],[1,-1]],[[0,0],[0,-1],[1,0],[1,-1]],[[0,0],[0,-1],[1,0],[1,-1]],[[0,0],[0,-1],[1,0],[1,-1]]]},S:{id:3,shape:[[[-1,0],[0,0],[0,-1],[1,-1]],[[0,0],[0,-1],[1,0],[1,1]],[[-1,0],[0,0],[0,-1],[1,-1]],[[0,0],[0,-1],[1,0],[1,1]]]},Z:{id:4,shape:[[[-1,-1],[0,-1],[0,0],[1,0]],[[0,0],[0,1],[1,0],[1,-1]],[[-1,-1],[0,-1],[0,0],[1,0]],[[0,0],[0,1],[1,0],[1,-1]]]},J:{id:5,shape:[[[-1,-1],[-1,0],[0,0],[1,0]],[[1,-1],[0,1],[0,0],[0,-1]],[[-1,0],[0,0],[1,0],[1,1]],[[-1,1],[0,1],[0,0],[0,-1]]]},L:{id:6,shape:[[[-1,0],[0,0],[1,0],[1,-1]],[[0,-1],[0,0],[0,1],[1,1]],[[-1,0],[0,0],[1,0],[-1,1]],[[0,-1],[0,0],[0,1],[-1,-1]]]},T:{id:7,shape:[[[0,0],[-1,0],[0,-1],[1,0]],[[0,0],[0,1],[0,-1],[1,0]],[[0,0],[0,1],[-1,0],[1,0]],[[0,0],[0,1],[-1,0],[0,-1]]]}},m=[5,1],y=(n(14),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"field"},a.a.createElement("table",null,a.a.createElement("tbody",null,this.props.field.map((function(e,t){return a.a.createElement("tr",{key:t},e.map((function(e,t){return a.a.createElement("td",{key:t,className:"block_type_"+e})})))})))))}}]),t}(r.Component)),h=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).gameStart=function(){n.createNewMino(),setInterval(n.mainLoop,1e3)},n.mainLoop=function(){n.fall()},n.checkDeleteLine=function(e){e.reverse();var t=0,r=[],a=!0,i=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var u=l.value,d=0,f=!0,c=!1,v=void 0;try{for(var m,y=u[Symbol.iterator]();!(f=(m=y.next()).done);f=!0){m.value>=0&&(d=1)}}catch(g){c=!0,v=g}finally{try{f||null==y.return||y.return()}finally{if(c)throw v}}d?r.push(u):t+=1}}catch(g){i=!0,o=g}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}for(var h=0;h<t-1;h++)r.push([-8,0,0,0,0,0,0,0,0,0,0,-8]);r.reverse(),r.push([-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8,-8]);var p=n.state.delete_lines;return n.setState({delete_lines:p+t-1}),r},n.isCollision=function(e){var t=n.state.field,r=n.state.minoCoordinate[0],a=n.state.minoCoordinate[1],i=n.state.mino[n.state.currentMino],o=i.shape[n.state.angle];switch(e){case"down":var l=!0,s=!1,u=void 0;try{for(var d,f=o[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var c=d.value;if(t[a+c[1]+1][r+c[0]]<0)return!0}}catch(N){s=!0,u=N}finally{try{l||null==f.return||f.return()}finally{if(s)throw u}}return!1;case"left":if(r<=1)return!0;var v=!0,m=!1,y=void 0;try{for(var h,p=o[Symbol.iterator]();!(v=(h=p.next()).done);v=!0){var g=h.value;if(t[a+g[1]][r+g[0]-1]<0)return!0}}catch(N){m=!0,y=N}finally{try{v||null==p.return||p.return()}finally{if(m)throw y}}return!1;case"right":if(r>=10)return!0;var C=!0,w=!1,S=void 0;try{for(var b,k=o[Symbol.iterator]();!(C=(b=k.next()).done);C=!0){var M=b.value;if(t[a+M[1]][r+M[0]+1]<0)return!0}}catch(N){w=!0,S=N}finally{try{C||null==k.return||k.return()}finally{if(w)throw S}}return!1;case"rotate":var x=(n.state.angle+1)%4,E=i.shape[x],O=!0,_=!1,j=void 0;try{for(var F,L=E[Symbol.iterator]();!(O=(F=L.next()).done);O=!0){var I=F.value;if(t[a+I[1]][r+I[0]]<0)return!0}}catch(N){_=!0,j=N}finally{try{O||null==L.return||L.return()}finally{if(_)throw j}}return!1}},n.fall=function(){if(n.isCollision("down")){var e=n.generateField(),t=n.state.minoCoordinate[0],r=n.state.minoCoordinate[1],a=n.state.mino[n.state.currentMino],i=a.shape[n.state.angle],o=!0,l=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var f=u.value;e[r+f[1]][t+f[0]]=0-a.id}}catch(M){l=!0,s=M}finally{try{o||null==d.return||d.return()}finally{if(l)throw s}}e=n.checkDeleteLine(e);var c=n.state.generateMinoPos;n.setState({template_field:e,minoCoordinate:c,angle:0}),n.createNewMino()}else{var v=n.generateField(),m=n.state.minoCoordinate[0],y=n.state.minoCoordinate[1]+1,h=n.state.mino[n.state.currentMino],p=h.shape[n.state.angle],g=!0,C=!1,w=void 0;try{for(var S,b=p[Symbol.iterator]();!(g=(S=b.next()).done);g=!0){var k=S.value;v[y+k[1]][m+k[0]]=h.id}}catch(M){C=!0,w=M}finally{try{g||null==b.return||b.return()}finally{if(C)throw w}}n.setState({field:v,minoCoordinate:[m,y]})}},n.moveLeft=function(){if(!n.isCollision("left")){var e=n.generateField(),t=n.state.minoCoordinate[0]-1,r=n.state.minoCoordinate[1],a=n.state.mino[n.state.currentMino],i=a.shape[n.state.angle],o=!0,l=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var f=u.value;e[r+f[1]][t+f[0]]=a.id}}catch(c){l=!0,s=c}finally{try{o||null==d.return||d.return()}finally{if(l)throw s}}n.setState({field:e,minoCoordinate:[t,r]})}},n.moveRight=function(){if(!n.isCollision("right")){var e=n.generateField(),t=n.state.minoCoordinate[0]+1,r=n.state.minoCoordinate[1],a=n.state.mino[n.state.currentMino],i=a.shape[n.state.angle],o=!0,l=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var f=u.value;e[r+f[1]][t+f[0]]=a.id}}catch(c){l=!0,s=c}finally{try{o||null==d.return||d.return()}finally{if(l)throw s}}n.setState({field:e,minoCoordinate:[t,r]})}},n.drop=function(){for(var e=n.generateField(),t=n.state.minoCoordinate[0],r=n.state.minoCoordinate[1],a=n.state.mino[n.state.currentMino],i=a.shape[n.state.angle],o=0;o<20;o++){var l=0;r+=1;var s=!0,u=!1,d=void 0;try{for(var f,c=i[Symbol.iterator]();!(s=(f=c.next()).done);s=!0){var v=f.value;e[r+v[1]][t+v[0]]<0&&(l=1)}}catch(S){u=!0,d=S}finally{try{s||null==c.return||c.return()}finally{if(u)throw d}}if(l){r-=1;break}}var m=!0,y=!1,h=void 0;try{for(var p,g=i[Symbol.iterator]();!(m=(p=g.next()).done);m=!0){var C=p.value;e[r+C[1]][t+C[0]]=0-a.id}}catch(S){y=!0,h=S}finally{try{m||null==g.return||g.return()}finally{if(y)throw h}}e=n.checkDeleteLine(e);var w=n.state.generateMinoPos;n.setState({template_field:e,minoCoordinate:w,angle:0}),n.createNewMino()},n.rotate=function(){if(!n.isCollision("rotate")){var e=n.generateField(),t=n.state.minoCoordinate[0],r=n.state.minoCoordinate[1],a=(n.state.angle+1)%4,i=n.state.mino[n.state.currentMino],o=i.shape[a],l=!0,s=!1,u=void 0;try{for(var d,f=o[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var c=d.value;e[r+c[1]][t+c[0]]=i.id}}catch(v){s=!0,u=v}finally{try{l||null==f.return||f.return()}finally{if(s)throw u}}n.setState({field:e,angle:a})}},n.createNewMino=function(){var e=["I","O","S","Z","J","L","T"],t=n.state.minoIdx,r=n.state.mino[e[t]],a=n.generateField();r.shape[0].forEach((function(e,t){var i=n.state.generateMinoPos[0]+e[0],o=n.state.generateMinoPos[1]+e[1];a[o][i]<0&&n.setState({end_flag:!0}),a[o][i]=r.id})),t>=6?n.setState({currentMino:e[t],field:a,minoIdx:0}):n.setState({currentMino:e[t],field:a,minoIdx:t+1})},n.generateField=function(){for(var e=[],t=0;t<=20;t++){for(var r=[],a=0;a<=11;a++)r.push(n.state.template_field[t][a]);e.push(r)}return e},n.cleanField=function(){for(var e=n.state.field,t=0;t<20;t++)for(var r=1;r<=10;r++)e[t][r]=0;n.setState({field:e})},n.renderScreen=function(){return n.state.end_flag?a.a.createElement("div",null,a.a.createElement("div",null,"Game Over\uff08\u518d\u30d7\u30ec\u30a4\u306b\u306f\u30da\u30fc\u30b8\u3092\u66f4\u65b0\u3057\u3066\u304f\u3060\u3055\u3044\uff09")):a.a.createElement(y,{field:n.state.field})},n.state={template_field:c,field:c,mino:v,generateMinoPos:m,minoCoordinate:m,currentMino:null,minoIdx:0,angle:0,end_flag:!1,delete_lines:0},window.onkeydown=function(e){37===e.keyCode?n.moveLeft():32===e.keyCode?n.drop():39===e.keyCode?n.moveRight():40===e.keyCode?n.fall():38===e.keyCode&&n.rotate()},n}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.gameStart()}},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},this.renderScreen(),a.a.createElement("div",null,"\u6d88\u3057\u305f\u884c\u6570\uff1a",this.state.delete_lines))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(h,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.45256a1b.chunk.js.map